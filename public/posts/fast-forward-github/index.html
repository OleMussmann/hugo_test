<!DOCTYPE html>
<html lang="en-us"
  dir="ltr">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">



<link rel="icon" type="image/ico" href="http://localhost:1313//favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313//favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313//favicon-32x32.png">
<link rel="icon" type="image/png" sizes="192x192" href="http://localhost:1313//android-chrome-192x192.png">
<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:1313//apple-touch-icon.png">

<meta name="description" content="Automated fast-forward merges on GitHub.com"/>


<meta name="fediverse:creator" content="@ole@fosstodon.org">


<title>
    
    Fast-Forward Merges on GitHub | ole.mn
    
</title>

<link rel="canonical" href="http://localhost:1313/posts/fast-forward-github/"/>

<meta property="og:url" content="http://localhost:1313/posts/fast-forward-github/">
  <meta property="og:site_name" content="ole.mn">
  <meta property="og:title" content="Fast-Forward Merges on GitHub">
  <meta property="og:description" content="Automated fast-forward merges on GitHub.com">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-01-26T08:58:59+01:00">
    <meta property="article:modified_time" content="2025-01-26T08:58:59+01:00">
    <meta property="article:tag" content="GitHub">
    <meta property="article:tag" content="Git">













<link rel="stylesheet" href="/assets/combined.min.19379ab6a3077e18ad480b9072fd9f8e80ea87f25351cdc5ccbddf859e55e269.css" media="all">

<script src="/js/main.23cd0c7d837263b9eaeb96ee2d9ccfa2969daa3fa00fa1c1fe8701a9b87251a1.js" integrity="sha256-I80MfYNyY7nq65buLZzPopadqj&#43;gD6HB/ocBqbhyUaE="
    crossorigin="anonymous"></script>




</head>







<body class="auto">

  <div class="content">
    <header>
      

<div class="header">

    

    <h1 class="header-title">
        <a href="http://localhost:1313/">ole.mn</a>
    </h1>

    <div class="flex">
        

        
        
      
        <p class="small ">
            <a href="/" >
                /home
            </a>
        </p>
        
      
        <p class="small ">
            <a href="/posts" >
                /posts
            </a>
        </p>
        
      
        <p class="small ">
            <a href="/projects" >
                /projects
            </a>
        </p>
        
      
        <p class="small ">
            <a href="/slides" >
                /slides
            </a>
        </p>
        
      
        <p class="small ">
            <a href="/about" >
                /about
            </a>
        </p>
        
      
        <p class="small ">
            <a href="/index.xml" >
                /rss
            </a>
        </p>
        
        
    </div>

    

</div>

    </header>

    <main class="main">
      







<div >

  <div class="single-intro-container">

    

    <h1 class="single-title">Fast-Forward Merges on GitHub</h1>
    
    <p class="single-summary">Wrestling Octocat for Basic Functionality</p>
    

    

    <p class="single-readtime">
      
      
      
      <time datetime="2025-01-26T08:58:59&#43;01:00">2025-01-26</time>
      

      
      &nbsp; Â· &nbsp;
      9 min read
      
    </p>

  </div>

  

  
  

  <div class="single-tags">
    
    <span>
      <a href="http://localhost:1313/tags/github/">#GitHub</a>
    </span>
    
    
    <span>
      <a href="http://localhost:1313/tags/git/">#Git</a>
    </span>
    
    
  </div>

  
  

  

  

  

  <div class="single-content">
    <blockquote>
<p>&ldquo;I&rsquo;ve got no time for prose, give me a solution!&rdquo; <a href="#solutions">Sure, click here to get to the juicy bits.</a> For the readers with patience, the story starts below.</p>
</blockquote>
<p><a href="https://github.com">Github.com</a> offers version-control-as-a-service, with all kinds of useful things bolted on top. The year is 2025 A.C. and GitHub leverages the vast power of <code>git</code> and exposes it entirely to their users. Well, not entirely&hellip; One small feature of indomitable usefulness still holds out against the invaders. Well OK. Here the stories diverge.</p>
<p>One <code>git</code> feature that is not available via the <a href="https://github.com">github.com</a> web interface are &ldquo;fast-forward (ff) merges&rdquo;. It is among the highest <code>git</code>-related feature requests with about 1500 upvotes.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> To explain what that is and why one would want this, we have to take a detour first.</p>
<h2 class="heading" id="intermezzo-merge-types">
  Intermezzo: Merge Types
  <a class="anchor" href="#intermezzo-merge-types">#</a>
</h2>
<p>To set the ground for explaining fast-forward merging, I&rsquo;ll cherry-pick (chuckle) a specific scenario.</p>
<p>Let&rsquo;s follow best practices where we have our <code>main</code> branch protected, meaning that we cannot add changes to it directly. Any changes that should end up in <code>main</code> will be merged via pull- (GitHub speak) or merge- (same, but GitLab speak) requests. That way there can be some auditing before code ends up in the <code>main</code> branch. This could prevent minor hiccups like the <a href="https://en.wikipedia.org/wiki/2024_CrowdStrike-related_IT_outages">CrowdStrike-related IT outages</a>.</p>
<p>














<figure class=" img-full">

    <div>
        <img loading="lazy" alt="X post from nixCraft, reading: &ldquo;Guys, I started working at the cybersecurity firm Crowdstrike. Today is my first day. Eight hours ago, I pushed some major code to production. I am so proud of myself. I am going home now. I feel something really good is coming my way tomorrow morning at work&rdquo;" src="/posts/fast-forward-github/nixCraft_crowdstrike.png#full" width="579px" height="156px">
    </div>

    
    <div class="caption-container">
        <figcaption> nixCraft having a blast at Crowdstrike </figcaption>
    </div>
    
</figure>
</p>
<p>Granted, I don&rsquo;t think code pushed to <code>main</code> was the cause for the global-scale IT outage, but it would have been funny if it was &ndash; however funny <a href="https://www.businessinsider.com/businesses-claiming-losses-crowdstrike-outage-insurance-billions-losses-cyber-policies-2024-7">~$10 billion in damages</a> can be.</p>
<p>A bit more opinionated than protecting <code>main</code> is the choice to keep the <code>git</code> commit history linear. With &ldquo;commit&rdquo; we mean a snapshot in time &ndash; a set of related changes to your code with a specific description &ndash; so you can find it back later. Reasons for a linear <code>git</code> history could be that you follow the <a href="https://finitestate.io/blog/git-v-branching-model">Git V Branching Model</a> or if you want to have <a href="https://abelsiqueira.com/">Abel</a>&rsquo;s <a href="https://blog.esciencecenter.nl/the-utopic-git-history-d44b81c09593">Utopic Git History</a>. In general, <code>git</code> commit graphs can look a bit complicated.</p>
<p>











<figure class="">

    <div>
        <img loading="lazy" alt="Very complicated git commit history graph, looking like a guitar hero track" src="/posts/fast-forward-github/guitar-hero.png" width="1710px" height="440px">
    </div>

    
    <div class="caption-container">
        <figcaption> <code>git</code> commit graph: Guitar Hero ðŸŽ¸ </figcaption>
    </div>
    
</figure>













<figure class="">

    <div>
        <img loading="lazy" alt="Very complicated git commit history graph, looking like a harp" src="/posts/fast-forward-github/git_harp.png" width="1110px" height="1112px">
    </div>

    
    <div class="caption-container">
        <figcaption> <code>git</code> commit graph: Harp ðŸŽµ </figcaption>
    </div>
    
</figure>













<figure class="">

    <div>
        <img loading="lazy" alt="A map of the London underground, looking like a git commit graph" src="/posts/fast-forward-github/london_underground.jpeg" width="1395px" height="924px">
    </div>

    
    <div class="caption-container">
        <figcaption> <code>git</code> commit graph: London Underground ðŸš‡ (/s) </figcaption>
    </div>
    
</figure>
</p>
<h3 class="heading" id="branches">
  Branches
  <a class="anchor" href="#branches">#</a>
</h3>
<p>To compartmentalize development tasks and to keep the repository tidy, we often use &ldquo;branches&rdquo;. These are alternative realities of your code-base, and you can jump back and forth between them like <a href="https://marvelcinematicuniverse.fandom.com/wiki/Doctor_Strange">Dr. Strange</a>.</p>
<p>Instead of the mess above, let&rsquo;s simplify our <code>git</code> commit history such that it looks like a straight string of pearls. In the following visualizations, time progresses towards the right. The horizontal lines represent branches, and the nodes on them are commits with a certain commit message. They <em>also</em> have a specific fingerprint, called &ldquo;hash&rdquo;, that uniquely identifies them. We will come back to that later.</p>
<pre class="mermaid">---
title: Linear git history
---
gitGraph
commit id: &#34;first commit&#34;
commit id: &#34;second commit&#34;
commit id: &#34;develop feature&#34;
commit id: &#34;write tests&#34;
commit id: &#34;bugfix&#34;
commit id: &#34;update docs&#34;
</pre>

<p>When we work on a feature or a bugfix (or anything, really) we usually do that on a separate branch, nicely separated. After we finished working on this branch, we want to <em>somehow</em> get the changes we made back onto the <code>main</code> branch. There are different approaches for that.</p>
<h3 class="heading" id="merge-commit">
  Merge Commit
  <a class="anchor" href="#merge-commit">#</a>
</h3>
<p>&ldquo;Standard&rdquo; merge commits leave the history where exactly the code came from intact. An extra &ldquo;merge commit&rdquo; contains the changes from our <code>feature</code> branch.</p>
<pre class="mermaid">---
title: Merge Commit
---
gitGraph
commit id: &#34;first commit&#34;
commit id: &#34;second commit&#34;
branch feature
commit id: &#34;develop feature&#34;
commit id: &#34;write tests&#34;
checkout main
merge feature id: &#34;merge commit&#34;
commit id: &#34;bugfix&#34;
commit id: &#34;update docs&#34;
</pre>

<h3 class="heading" id="rebase">
  Rebase
  <a class="anchor" href="#rebase">#</a>
</h3>
<p>Another way to keep the <code>git</code> history linear is &ldquo;rebasing&rdquo;. This approach basically re-plays the new commits that happened on the <code>feature</code> branch onto the <code>main</code> branch. This means that there is no &ldquo;merge commit&rdquo; on the <code>main</code> branch anymore. However, if there have been commits to <code>main</code> after <code>feature</code> has been branched off, the <code>feature</code> commits are re-written. Do you remember the &ldquo;hash&rdquo; fingerprint, I <a href="#branches">mentioned before</a>? Here it becomes important. When rebasing, the commit content and commit messages are the same, but since these are effectively &ldquo;new&rdquo; commits, the commit hashes are different! This means that anything that was attached to a certain hash, like signatures or tags, will point to the commits on the <code>feature</code> branch. To demonstrate this, we attached a tag <code>v1.0.0</code> to one commit on the <code>feature</code> branch.</p>
<pre class="mermaid">---
title: Before Rebase
---
gitGraph
commit id: &#34;first commit&#34;
commit id: &#34;second commit&#34;
branch feature
checkout main
commit id: &#34;stuff&#34;
checkout feature
commit id: &#34;code&#34;
commit id: &#34;tests&#34; tag: &#34;v1.0.0&#34;
</pre>

<pre class="mermaid">---
title: After Rebase
---
gitGraph
commit id: &#34;first commit&#34;
commit id: &#34;second commit&#34;
branch feature
checkout main
commit id: &#34;stuff&#34;
checkout feature
commit id: &#34;code&#34;
commit id: &#34;tests&#34; tag: &#34;v1.0.0&#34;
checkout main
commit id: &#34;code (new)&#34; type: HIGHLIGHT
commit id: &#34;tests (new)&#34; type: HIGHLIGHT
</pre>

<p>Do you see how the tag is kept dangling on the now useless <code>feature</code> branch?</p>
<h3 class="heading" id="fast-forward-merging">
  Fast-forward Merging
  <a class="anchor" href="#fast-forward-merging">#</a>
</h3>
<p>&ldquo;Fast-forward&rdquo; merging can be achieved if <code>main</code> did <em>not receive any commits</em> in the meantime. So clean! Instead of re-writing the commits onto another branch, the <code>main</code> <em>and</em> <code>feature</code> commits are basically pointers to the exact same commit.</p>
<pre class="mermaid">---
title: Before ff-Merge
---
gitGraph
commit id: &#34;first commit&#34;
commit id: &#34;second commit&#34;
branch feature
commit id: &#34;code&#34;
commit id: &#34;tests&#34; tag: &#34;v1.0.0&#34;
</pre>

<pre class="mermaid">---
title: After ff-Merge
---
gitGraph
commit id: &#34;first commit&#34;
commit id: &#34;second commit&#34;
branch feature
commit id: &#34;code&#34;
commit id: &#34;tests&#34; tag: &#34;v1.0.0&#34;
checkout main
commit id: &#34;code (same!)&#34;
commit id: &#34;tests (same!)&#34; tag: &#34;v1.0.0&#34;
</pre>

<p>This looks very similar to rebasing, does it not?</p>
<p>In fact, if the <code>main</code> branch did not receive any new commits since the branching, fast-forward merging is the same as rebasing&hellip;</p>
<h2 class="heading" id="github-rebasing">
  GitHub Rebasing
  <a class="anchor" href="#github-rebasing">#</a>
</h2>
<p>&hellip;unless you are using the GitHub web interface. When you rebase a <code>feature</code> branch on GitHub onto an untouched <code>main</code> branch, the commits are still re-written. This is contrary to how <code>git</code> on the command line works. Why is that such a big deal? The commit messages are the same. The commit content is the same. Why worry about a different commit hash?</p>
<p>It matters, because lots of things are tied to a commit hash. A commit signature is tied to its hash! The signature gets lost if the hash changes during a rebase. The same holds true for tags. <code>feature</code> commit tags will point to the commits on the <code>feature</code> branch, not to the re-written ones on <code>main</code>.</p>
<h2 class="heading" id="solutions">
  Solutions
  <a class="anchor" href="#solutions">#</a>
</h2>
<p>Oh hi! You probably fast-forwarded directly to the solutions. Fine. I&rsquo;m not judging. There are two ways to achieve fast-forward merging when using GitHub. One is convoluted and error prone. The other one is cursed. Choose wisely.</p>
<h3 class="heading" id="using-local-git">
  Using Local <code>git</code>
  <a class="anchor" href="#using-local-git">#</a>
</h3>
<p>Protecting your <code>main</code> branch means that you can&rsquo;t commit to it directly. You can, however, push sanctioned changes from <code>main</code> to your remote repository on <a href="https://github.com">github.com</a>. Wait, what? I thought you can&rsquo;t touch <code>main</code> ? Follow me, I&rsquo;ll show you.</p>
<ul>
<li>Create a pull request from <code>feature</code> to <code>main</code> on <a href="https://github.com">github.com</a></li>
<li>Open a terminal and create some magic:
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#81a1c1">cd</span> your/project/folder     <span style="color:#616e87;font-style:italic"># cd into your project directory</span>
</span></span><span style="display:flex;"><span>git pull    <span style="color:#616e87;font-style:italic"># get the latest changes to your local computer</span>
</span></span><span style="display:flex;"><span>git switch main      <span style="color:#616e87;font-style:italic"># select the main branch, if necessary</span>
</span></span><span style="display:flex;"><span>git merge --ff-only feature    <span style="color:#616e87;font-style:italic"># ff-merge feature onto main</span>
</span></span><span style="display:flex;"><span>git push      <span style="color:#616e87;font-style:italic"># allowed! because you created a pull request</span>
</span></span></code></pre></div></li>
<li>The pull request is automatically closed ðŸª„</li>
</ul>
<p>While rather low-tech, this relies on the workflow and discipline of the developers to work. This is a danger zone. It is 4:55pm on a Friday afternoon. You opened a pull request to contribute your work on the <code>feature</code> branch and now watch patiently how the green circle closes that shows that all CI tests passed. Your fingers itch to wrap things up quickly so you can go home and wolf down the lasagna you prepared already the day before.</p>
<p>The mouse cursor hovers over the fat, green &ldquo;Merge pull request&rdquo; button.</p>
<p>











<figure class="">

    <div>
        <img loading="lazy" alt="Mouse cursor hovering menacingly over GitHubs &ldquo;Merge pull request&rdquo; button" src="/posts/fast-forward-github/MERGE.png" width="488px" height="162px">
    </div>

    
    <div class="caption-container">
        <figcaption> Don&rsquo;t. Don&rsquo;t do it. </figcaption>
    </div>
    
</figure>
</p>
<p><strong>Stop! Resist the temptation!</strong></p>
<p>Click that button and you need to spend the next half hour undoing the rebased, re-written commits to <code>main</code>, while sweating profusely because now you are messing directly with the <code>main</code> branch, which you tried to prevent by protecting it in the first place. And by now, at home, your partner has finished both their and your piece of the lasagna.</p>
<p>Instead of following the suggested path, you need to step away from the browser and open the terminal. You pull the changes, fast-forward merge locally and finally push to <code>main</code>, as shown above.</p>
<h3 class="heading" id="using-actions">
  Using Actions
  <a class="anchor" href="#using-actions">#</a>
</h3>
<p>This approach needs some set-up, but is safer to use afterwards.</p>
<h4 class="heading" id="disable-the-merge-button">
  Disable the Merge Button
  <a class="anchor" href="#disable-the-merge-button">#</a>
</h4>
<p>We have learned now that the fat, green &ldquo;Merge&rdquo; button is dangerous<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>, so we need to disable it. In your GitHub repository, go to</p>
<blockquote>
<p>Settings â†’ General â†’ Pull Requests</p>
</blockquote>
<p>and allow only Squash Merging. Next, go to</p>
<blockquote>
<p>Settings â†’ Rules â†’ Rulesets</p>
</blockquote>
<p>and add a new rule. Name it <code>disable_merge_button</code>, set it to &ldquo;Active&rdquo;. Set the &ldquo;Target branches&rdquo; to the &ldquo;default branch&rdquo; a.k.a. <code>main</code>. Check &ldquo;Require a pull request before merging&rdquo; and, while waving a magic wand ðŸª„, set &ldquo;Allowed merge methods&rdquo; to &ldquo;Rebase&rdquo;, contradicting the general repository settings. Check whichever other settings you would like and click on &ldquo;Save changes&rdquo;.</p>
<p>Now pull requests cannot be merged anymore. Yay?</p>
<h4 class="heading" id="automate-the-wizardry">
  Automate the Wizardry
  <a class="anchor" href="#automate-the-wizardry">#</a>
</h4>
<p>Set up the &ldquo;Fast Forward Merge&rdquo; Action from the GitHub Marketplace: <a href="https://github.com/marketplace/actions/fast-forward-merge">https://github.com/marketplace/actions/fast-forward-merge</a> . This gives you two things:</p>
<ul>
<li>A message posted in the PR chat indicating whether fast-forward merging is possible.</li>
<li>A GitHub Action that fast-forward merges your Pull Request. You trigger it by commenting <code>/fast-forward</code> in the Pull Request chat.</li>
</ul>
<p>N.B.: For the triggered ff-merge to work, the Action yml file has to already exist in the <code>main</code> branch. So you have to get it there <em>once</em> via impure means.</p>
<p>It works. Yet it feels dirty. You just made a forbidden deal with <del>Cthulhu</del> Octocat and you will probably need to sacrifice the lasagna you made so it does not come to haunt you at night.</p>
<h2 class="heading" id="wrap-up">
  Wrap-Up
  <a class="anchor" href="#wrap-up">#</a>
</h2>
<p>By now you not only know what fast-forward merging is, you also have ways to use it on your external repository on <a href="https://github.com">github.com</a>. You might have subscribed to <a href="https://github.com/orgs/community/discussions/4618">github.com/orgs/community/discussions/4618</a> and now patiently wait for the powers-that-be to enable this feature on their website.</p>
<p>Until that happens, feel free to choose one of the workarounds outlined above.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Upvote count combines upvotes and thumbs-up from <a href="https://github.com/orgs/community/discussions/4618">https://github.com/orgs/community/discussions/4618</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>If you want to achieve fast-forward merging, that is.&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

    
  </div>

  
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    
    function runmermaid() {
      const theme = (document.body.classList.contains('dark') ? 'dark' : 'forest')
      mermaid.initialize({ startOnLoad: false, theme: theme});
      const items = document.querySelectorAll('.mermaid');
      let counter = 0;
      for (const item of items) {
        const id = counter++;
        if(item.originalCode === undefined) {
          item.originalCode = item.textContent.trim();
        }
        mermaid.render("mermaid"+id, item.originalCode).then((val) => {
          item.innerHTML = val.svg
        }, (err) => {
            console.log(err);
            
            item.innerHTML = "";
            item.appendChild(document.getElementById("mermaid" + id));
          });
      }
    }
    document.addEventListener('DOMContentLoaded', runmermaid);
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', runmermaid);
  </script>
  


  

  

  

  
  <div class="back-to-top">
    <a href="#top">
      back to top
    </a>
  </div>
  

</div>


    </main>
  </div>

  <footer>
    


  </footer>

  
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css">
<script defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script>

<script defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"
  onload="renderMathInElement(document.body);"></script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    renderMathInElement(document.body, {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false }
      ]
    });
  });
</script>
  

</body>

<script>

  function isAuto() {
    return document.body.classList.contains("auto");
  }

  function setTheme() {
    if (!isAuto()) {
      return
    }

    document.body.classList.remove("auto");
    let cls = "light";
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      cls = "dark";
    }

    document.body.classList.add(cls);
  }

  function invertBody() {
    document.body.classList.toggle("dark");
    document.body.classList.toggle("light");
  }

  if (isAuto()) {
    window.matchMedia('(prefers-color-scheme: dark)').addListener(invertBody);
  }

  setTheme();

</script>

<script defer src="/js/copy-code.js"></script>
</html>